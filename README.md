# 🔥 A股量化交易策略 - V28.0 AI增强版

## 📊 策略概览

这是一个基于V型底信号的A股量化交易策略，融合了传统技术分析和AI机器学习，实现了**1.71%期望收益**和**46.96%胜率**的优异表现。

### 🎯 核心指标
- **期望收益**: 1.71% (超过V6基准1.08%)
- **胜率**: 46.96%
- **交易次数**: 25,000+ (确保充足流动性)
- **最大回撤**: 控制在合理范围内

## 🧠 AI特征重要性排名

基于LightGBM模型训练的**Top 10最重要特征**：

| 排名 | 特征名称 | 重要性 | 描述 |
|------|----------|--------|------|
| 1 | `ma5_trend` | 15.44% | 5日均线趋势，最重要！ |
| 2 | `close_vs_low_4d` | 10.58% | 收盘价相对4天最低价位置 |
| 3 | `closing_strength` | 6.73% | 收盘强度 |
| 4 | `amount_volume_ratio` | 6.24% | 成交额成交量比 |
| 5 | `max_intraday_range` | 6.05% | 最大日内波动 |
| 6 | `avg_volume_4d` | 5.10% | 4天平均成交量 |
| 7 | `volume_consistency` | 5.05% | 成交量一致性 |
| 8 | `volume_acceleration` | 4.39% | 成交量加速度 |
| 9 | `v_bottom_depth` | 4.24% | V型底深度 |
| 10 | `price_momentum_3d` | 3.77% | 3天价格动量 |

## 🚀 策略核心逻辑

### 1. 信号识别 (V6基石)
- **连续4天收盘价不减**: a ≤ b ≤ c ≤ d
- **V型底确认**: 第0天收盘价 = min{过去n天收盘价}，n≥20
- **入场时机**: 第4天以收盘价买入

### 2. AI评分系统 (V27通用模型)
- 基于近10万条沪深历史信号训练
- 使用13个高级特征进行预测
- 输出每个信号的预期收益率

### 3. 精英筛选与仓位管理
- **Top 40%筛选**: 保留评分最高的40%信号
- **线性仓位映射**: 2%-15%动态仓位分配
- **排名公式**: position = 2% + (rank_pct / 100) * 13%

### 4. 风险控制 (V6经典)
- **硬止损**: 3.1%止损线
- **豁免期**: 第一下跌日不减仓
- **分级减仓**: 下跌2%以内减10%，超过减20%

## 📁 项目结构

```
├── README.md                    # 项目说明
├── prd                         # 产品需求文档
├── 策略文件/
│   ├── 终极策略_V28.0_最终版.txt    # 完整策略文档
│   ├── V31_AI_Feature_Learning.py  # AI特征学习
│   ├── V32_AI_Elite_Strategy.py    # AI精英策略
│   └── V28_Backtester.py           # 回测引擎
├── 模型文件/
│   ├── v27_universal_model.pkl     # 通用AI模型
│   ├── V31_AI_Feature_Model.pkl    # 特征学习模型
│   └── V31_AI_Feature_Scaler.pkl  # 特征标准化器
├── 数据文件/
│   ├── 上海主板_历史数据_2018至今_*.csv
│   └── 深圳主板_历史数据_2018至今_*.csv
└── 回测结果/
    ├── V25_V6_Strategy_NoFilter_Trades.csv
    ├── V26_V28_Enhanced_Trades.csv
    └── V27_V24_Kelly_Trades.csv
```

## 🛠️ 快速开始

### 环境要求
```bash
pip install pandas numpy scikit-learn lightgbm joblib
```

### 运行策略
```bash
# 运行AI特征学习
python V31_AI_Feature_Learning.py

# 运行AI精英策略
python V32_AI_Elite_Strategy.py

# 运行回测
python V28_Backtester.py
```

## 📈 性能表现

### 策略对比
| 策略版本 | 期望收益 | 胜率 | 交易次数 | 特点 |
|----------|----------|------|----------|------|
| V6 (基准) | 1.08% | 46.74% | 51,515 | 严格V型底 |
| V28 (AI增强) | 1.71% | 46.96% | 25,000+ | AI评分+精英筛选 |

### 仓位管理
- **激进仓位**: 半凯利公式 (50% Kelly)
- **保守仓位**: 四分之一凯利公式 (25% Kelly)

## 🔍 关键发现

1. **5日均线趋势是最重要特征** (15.44%)，远超其他特征
2. **收盘价相对4天最低价位置** (10.58%) 是第二重要特征
3. **成交量相关特征** 占据重要地位，包括一致性、加速度等
4. **V型底深度** 虽然重要但排名相对靠后 (4.24%)

## ⚠️ 重要提醒

- 本策略基于历史数据回测，实际交易存在风险
- 建议在实盘前进行充分的模拟交易验证
- 仓位管理是成功的关键，请严格执行风险控制
- 定期更新模型和特征，适应市场变化

## 📞 联系方式

如有问题或建议，欢迎提交Issue或Pull Request。

---

**免责声明**: 本策略仅供学习和研究使用，不构成投资建议。投资有风险，入市需谨慎。 